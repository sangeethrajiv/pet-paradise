{% load static %}
{% load products_tag %}
<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>{% block title %}{% endblock title %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" type="image/x-icon" href="{% static 'assets/img/favicon.png' %}">
    <!-- Place favicon.ico in the root directory -->

    <!-- CSS here -->
<link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/animate.min.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/magnific-popup.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/fontawesome-all.min.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/flaticon_pet_care.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/odometer.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/swiper-bundle.min.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/select2.min.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/jquery-ui.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/aos.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/default.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/main.css' %}">

</head>
   <!--Preloader-->
    <div id="preloader">
        <div id="loader" class="loader">
            <div class="loader-container">
                <div class="loader-icon"><img src="{% static "assets/img/logo/preloader.svg" %} " alt="Preloader"></div>
            </div>
        </div>
    </div>
    <!--Preloader-end -->

    <!-- Scroll-top -->
    <button class="scroll__top scroll-to-target" data-target="html">
        <i class="fas fa-angle-up"></i>
    </button>
    <!-- Scroll-top-end-->
<body>
    {% block header %}

        <!-- header-area -->
    <header>
        <div id="header-fixed-height"></div>
        <div id="sticky-header" class="tg-header__area tg-header__area-two">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="tgmenu__wrap">
                            <nav class="tgmenu__nav">
                                <div class="logo">
                                    <a href=""><img src="{% static "assets/img/logo/logo.png" %}" alt="Logo"></a>
                                </div>
                                <div class="tgmenu__navbar-wrap tgmenu__main-menu d-none d-lg-flex">
                                    <ul class="navigation">
                                        <li class="active menu-item-has-children"><a href="#">Home</a>
                                            <ul class="sub-menu">
                                                <li><a href="{% url "home" %}">Pet Care & Veterinary</a></li>
                                                <li><a href="{% url "petbreed" %}">Pet Breed</a></li>
                                                <li><a href="{% url "petadopt" %}">Pet Adopt</a></li>
                                                
                                            </ul>
                                        </li>
                                        <li><a href="{% url "about" %}">About</a></li>
                                        <li class="menu-item-has-children"><a href="#">Shop</a>
                                            <ul class="sub-menu">
                                                <li><a href="{% url "shophome" %}">Our Shop</a></li>
                                                <li><a href="{% url "shop" %}">Shop Details</a></li>
                                                 <li><a href="{% url "petshop" %}">Pets Available</a></li>
                                            </ul>
                                        </li>
                                        <li class="menu-item-has-children"><a href="#">Pages</a>
                                            <ul class="sub-menu">
                                                <li><a href="{% url "petshop" %}">All Pets</a></li>
                                                <li><a href="{% url "orderslist" %}">My Orders</a></li>
                                                <li><a href="{% url "petadoption" %}">Pet Details</a></li>
                                                <li><a href="{% url "gallery" %}">Gallery</a></li>
                                                <li><a href="{% url "faq" %}">Faq Page</a></li>
                                                <li><a href="{% url "ourteam" %}">Our Team</a></li>
                                                <li><a href="{% url "teamdetails" %}">Team Details</a></li>
                                                <li><a href="{% url "blog" %}">Our Blog</a></li>
                                                <li><a href="{% url "ourblog" %}">Blog Details</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="{% url "contact" %}">contacts</a></li>
                                    </ul>
                                </div>
                                <div class="tgmenu__action d-none d-md-block">
                                    <ul class="list-wrap">
                                        <li class="header-search">
                                            <a href="javascript:void(0)" class="search-open-btn">
                                                <i class="flaticon-loupe"></i>
                                            </a>
                                        </li>
                                        <li class="header-cart">
                                             <a href="{% url 'cart' %}">
                                                <i class="flaticon-shopping-bag"></i>
                                                <span id="cart-count" class="count">{{ cart_items|length }}</span>
                                            </a>
                                        </li>
                                            {% if user.is_authenticated %}
                                                <li><a href="" class="btn border-btn">
                                                   <i class="flaticon-user" style="width: 20px; height: 20px; font-size: 16px; display: inline-block; line-height: 1;"></i>{{ user.username }}</a></li>
                                            {% else %}
                                                <li class="header-btn login-btn"><a href="{% url "login" %}" class="btn"><i
                                                            class="flaticon-user"></i>Login</a></li>
                                            {% endif %}
                                    </ul>
                                </div>
                                <div class="mobile-nav-toggler">
                                    <i class="flaticon-layout"></i>
                                </div>
                            </nav>
                        </div>

                        <!-- Mobile Menu  -->
                        <div class="tgmobile__menu">
                            <nav class="tgmobile__menu-box">
                                <div class="close-btn"><i class="fas fa-times"></i></div>
                                <div class="nav-logo">
                                    <a href=""><img src="{% static "assets/img/logo/logo.png" %}" alt="Logo"></a>
                                </div>
                                <div class="tgmobile__search">
                                    <form action="#">
                                        <input type="text" placeholder="Search here...">
                                        <button><i class="fas fa-search"></i></button>
                                    </form>
                                </div>
                                <div class="tgmobile__menu-outer">
                                    <!--Here Menu Will Come Automatically Via Javascript / Same Menu as in Header-->
                                </div>
                                <div class="social-links">
                                    <ul class="list-wrap">
                                        <li><a href="https://www.facebook.com/" target="_blank"><i class="fab fa-facebook-f"></i></a></li>
                                        <li><a href="https://twitter.com/" target="_blank"><i class="fab fa-twitter"></i></a></li>
                                        <li><a href="https://www.whatsapp.com/" target="_blank"><i class="fab fa-whatsapp"></i></a></li>
                                        <li><a href="https://www.instagram.com/" target="_blank"><i class="fab fa-instagram"></i></a></li>
                                        <li><a href="https://www.youtube.com/" target="_blank"><i class="fab fa-youtube"></i></a></li>
                                    </ul>
                                </div>
                            </nav>
                        </div>
                        <div class="tgmobile__menu-backdrop"></div>
                        <!-- End Mobile Menu -->

                    </div>
                </div>
            </div>
        </div>

        <!-- header-search -->
        <div class="search__popup">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="search__wrapper">
                            <div class="search__close">
                                <button type="button" class="search-close-btn">
                                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M17 1L1 17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                        <path d="M1 1L17 17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                    </svg>
                                </button>
                            </div>
                            <div class="search__form">
                                <form action="#">
                                    <div class="search__input">
                                        <input class="search-input-field" type="text" placeholder="Type keywords here">
                                        <span class="search-focus-border"></span>
                                        <button>
                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M9.55 18.1C14.272 18.1 18.1 14.272 18.1 9.55C18.1 4.82797 14.272 1 9.55 1C4.82797 1 1 4.82797 1 9.55C1 14.272 4.82797 18.1 9.55 18.1Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                                <path d="M19.0002 19.0002L17.2002 17.2002" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="search-popup-overlay"></div>
        <!-- header-search-end -->

    </header>
    <!-- header-area-end -->

    {% endblock header %}

    {% block content %}
        <!-- Main content will be injected here from child templates -->
    {% endblock content %}

    {% include "home/footer.html" %}

    <!-- JS here -->
    <script src="{% static 'assets/js/vendor/jquery-3.6.0.min.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'assets/js/jquery.magnific-popup.min.js'%}"></script>
    <script src="{% static 'assets/js/jquery.odometer.min.js'%}"></script>
    <script src="{% static 'assets/js/jquery.appear.js'%}"></script>
    <script src="{% static 'assets/js/swiper-bundle.min.js'%}"></script>
    <script src="{% static 'assets/js/jquery.countdown.min.js'%}"></script>
    <script src="{% static 'assets/js/svg-inject.min.js'%}"></script>
    <script src="{% static 'assets/js/select2.min.js'%}"></script>
    <script src="{% static 'assets/js/jquery-ui.min.js'%}"></script>
    <script src="{% static 'assets/js/ajax-form.js'%}"></script>
    <script src="{% static 'assets/js/wow.min.js'%}"></script>
    <script src="{% static 'assets/js/aos.js'%}"></script>
    <script src="{% static 'assets/js/main.js'%}"></script>

    {% block js %}
        <!-- Additional JS scripts can be added here from child templates -->
    {% endblock js %}
    <script src="{% static 'assets/js/checkout.js'%}"></script>
<script>
function updateCartModal() {
    $.ajax({
        url: '{% url "cart_data" %}', // URL to fetch cart data
        type: 'GET',
        success: function(data) {
            $('#cart-count').text(data.cart_count);
            let modalBody = $('#cartModal .modal-body');
            modalBody.empty();
            if (data.cart_items.length > 0) {
                let itemsList = $('<ul></ul>');
                data.cart_items.forEach(item => {
                    itemsList.append(`<li>${item.product.name} - $${item.product.price} x ${item.quantity}</li>`);
                });
                modalBody.append(itemsList);
                modalBody.append(`<p>Subtotal: $${data.subtotal}</p>`);
            } else {
                modalBody.append('<p>Your cart is empty.</p>');
            }
        },
        error: function(error) {
            console.error('Error fetching cart data:', error);
        }
    });
}

// Call updateCartModal when the modal is about to be shown
$('#cartModal').on('show.bs.modal', updateCartModal);
</script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            fetchUnreadCount();
        });

        function showMessages() {
            window.location.href = "{% url 'messages_page' %}";
        }

        function fetchUnreadCount() {
            fetch("{% url 'fetch_unread_count' %}")
                .then(response => response.json())
                .then(data => {
                    document.getElementById('unread-count').innerText = data.unread_count;
                });
        }
    </script>

    <script>
        function triggerTimeInput() {
    document.getElementById('id_appointment_time').click();
}
    </script>
</body>
</html>
